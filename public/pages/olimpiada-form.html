<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Olimp√≠ada - Olimp√≠ada IDB</title>
  <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;500;700&display=swap">
  <link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons">
  <link rel="stylesheet" href="https://unpkg.com/material-components-web@latest/dist/material-components-web.min.css">
  <link rel="stylesheet" href="../css/style.css">
</head>
<body>
  <div class="app-container">
    <!-- Sidebar -->
    <aside class="sidebar">
      <div class="sidebar-header">
        <a href="dashboard.html" class="sidebar-logo">
          <div class="sidebar-logo-icon">üèÜ</div>
          <span>Olimp√≠ada IDB</span>
        </a>
      </div>
    <nav class="sidebar-nav">
      <div class="nav-section">
        <div class="nav-section-title">Principal</div>
        <a href="dashboard.html" class="nav-item">
          <span class="nav-icon">üìä</span>
          <span>Dashboard</span>
        </a>
      </div>

      <div class="nav-section">
        <div class="nav-section-title">Olimp√≠adas</div>
        <a href="olimpiadas.html" class="nav-item active">
          <span class="nav-icon">üèÖ</span>
          <span>Olimp√≠adas</span>
        </a>
        <a href="inscricoes.html" class="nav-item">
          <span class="nav-icon">üìù</span>
          <span>Inscri√ß√µes</span>
        </a>
        <a href="resultados.html" class="nav-item">
          <span class="nav-icon">üìà</span>
          <span>Resultados</span>
        </a>
      </div>

      <div class="nav-section">
        <div class="nav-section-title">Cadastros</div>
        <a href="alunos.html" class="nav-item">
          <span class="nav-icon">üë•</span>
          <span>Alunos</span>
        </a>
        <a href="turmas.html" class="nav-item">
          <span class="nav-icon">üéì</span>
          <span>Turmas</span>
        </a>
        <a href="series.html" class="nav-item">
          <span class="nav-icon">üìö</span>
          <span>S√©ries</span>
        </a>
        <a href="anos-letivos.html" class="nav-item">
          <span class="nav-icon">üìÖ</span>
          <span>Anos Letivos</span>
        </a>
        <a href="filiais.html" class="nav-item">
          <span class="nav-icon">üè´</span>
          <span>Filiais</span>
        </a>
        <a href="tipos-correcao.html" class="nav-item">
          <span class="nav-icon">‚úÖ</span>
          <span>Tipos de Corre√ß√£o</span>
        </a>
        <a href="locais-aplicacao.html" class="nav-item">
          <span class="nav-icon">üìç</span>
          <span>Locais de Aplica√ß√£o</span>
        </a>
        <a href="tipos-pagamento.html" class="nav-item">
          <span class="nav-icon">üí∞</span>
          <span>Tipos de Pagamento</span>
        </a>
      </div>

      <div class="nav-section" id="adminSection" style="display: none;">
        <div class="nav-section-title">Administra√ß√£o</div>
        <a href="usuarios.html" class="nav-item">
          <span class="nav-icon">üë§</span>
          <span>Usu√°rios</span>
        </a>
      </div>

      <div class="nav-section">
        <div class="nav-section-title">Rankings</div>
        <a href="medalhistas.html" class="nav-item">
          <span class="nav-icon">ü•á</span>
          <span>Medalhistas</span>
        </a>
        <a href="rankings.html" class="nav-item">
          <span class="nav-icon">üìä</span>
          <span>Rankings</span>
        </a>
      </div>
    </nav>
  </aside>

  <!-- Main Content -->
  <main class="main-content">
      <!-- Topbar -->
      <header class="topbar">
        <div class="topbar-left">
          <button class="btn btn-secondary btn-sm" onclick="window.location.href='olimpiadas.html'">
            <span class="material-icons">arrow_back</span>
            Voltar
          </button>
          <h1 class="page-title" id="pageTitle">Nova Olimp√≠ada</h1>
        </div>
        <div class="topbar-right">
          <span class="topbar-user" id="userName">Carregando...</span>
          <button class="btn btn-secondary btn-sm" onclick="logout()">Sair</button>
        </div>
      </header>

      <!-- Content -->
      <div class="content">
      <!-- Breadcrumb -->
      <div style="margin-bottom: 24px;">
        <nav style="display: flex; align-items: center; gap: 8px; color: rgba(0,0,0,0.6); font-size: 14px; font-family: Roboto, sans-serif;">
          <a href="olimpiadas.html" style="color: #1976D2; text-decoration: none;">Olimp√≠adas</a>
          <span class="material-icons" style="font-size: 18px;">chevron_right</span>
          <span id="breadcrumbTitle">Nova Olimp√≠ada</span>
        </nav>
      </div>

      <!-- Form Card -->
      <div class="card" style="max-width: 1000px; box-shadow: 0 2px 4px rgba(0,0,0,0.1), 0 8px 16px rgba(0,0,0,0.1);">
        <div class="card-header">
          <h2 style="margin: 0; font-size: 20px; font-weight: 500; font-family: Roboto, sans-serif; color: rgba(0,0,0,0.87);">
            <span id="formTitle">Dados da Olimp√≠ada</span>
          </h2>
        </div>
        <div class="card-body">
          <form id="formOlimpiada" onsubmit="salvarOlimpiada(event)">
            <input type="hidden" id="idOlimpiada">
            
            <!-- Grid de 2 colunas -->
            <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 24px;">
              
              <!-- Coluna 1 -->
              <div>
                <!-- Nome -->
                <div style="margin-bottom: 24px;">
                  <label for="nomeOlimpiada" style="display: block; margin-bottom: 8px; font-size: 14px; color: rgba(0,0,0,0.6); font-family: Roboto, sans-serif; font-weight: 500;">
                    Nome da Olimp√≠ada *
                  </label>
                  <input 
                    type="text" 
                    id="nomeOlimpiada" 
                    required 
                    maxlength="100"
                    style="width: 100%; padding: 16px; border: 1px solid rgba(0,0,0,0.38); border-radius: 4px; font-size: 16px; font-family: Roboto, sans-serif; transition: border-color 0.2s;"
                    onfocus="this.style.borderColor='#1976D2'; this.style.borderWidth='2px'; this.style.padding='15px'"
                    onblur="this.style.borderColor='rgba(0,0,0,0.38)'; this.style.borderWidth='1px'; this.style.padding='16px'"
                  >
                </div>

                <!-- Ano -->
                <div style="margin-bottom: 24px;">
                  <label for="ano" style="display: block; margin-bottom: 8px; font-size: 14px; color: rgba(0,0,0,0.6); font-family: Roboto, sans-serif; font-weight: 500;">
                    Ano *
                  </label>
                  <select 
                    id="ano" 
                    required 
                    style="width: 100%; padding: 16px; border: 1px solid rgba(0,0,0,0.38); border-radius: 4px; font-size: 16px; font-family: Roboto, sans-serif; transition: border-color 0.2s; background-color: white;"
                    onfocus="this.style.borderColor='#1976D2'; this.style.borderWidth='2px'; this.style.padding='15px'"
                    onblur="this.style.borderColor='rgba(0,0,0,0.38)'; this.style.borderWidth='1px'; this.style.padding='16px'"
                  >
                    <option value="">Selecione</option>
                  </select>
                </div>
                <!-- Local de Aplica√ß√£o -->
                <div style="margin-bottom: 24px;">
                  <label for="localAplicacao" style="display: block; margin-bottom: 8px; font-size: 14px; color: rgba(0,0,0,0.6); font-family: Roboto, sans-serif; font-weight: 500;">
                    Local de Aplica√ß√£o
                  </label>
                  <select 
                    id="localAplicacao"
                    style="width: 100%; padding: 16px; border: 1px solid rgba(0,0,0,0.38); border-radius: 4px; font-size: 16px; font-family: Roboto, sans-serif; transition: border-color 0.2s; background-color: white;"
                    onfocus="this.style.borderColor='#1976D2'; this.style.borderWidth='2px'; this.style.padding='15px'"
                    onblur="this.style.borderColor='rgba(0,0,0,0.38)'; this.style.borderWidth='1px'; this.style.padding='16px'"
                  >
                    <option value="">Selecione</option>
                  </select>
                </div>

                <!-- Data Limite de Inscri√ß√£o -->
                <div style="margin-bottom: 24px;">
                  <label for="dataLimiteInscricao" style="display: block; margin-bottom: 8px; font-size: 14px; color: rgba(0,0,0,0.6); font-family: Roboto, sans-serif; font-weight: 500;">
                    Data Limite de Inscri√ß√£o
                  </label>
                  <input 
                    type="date" 
                    id="dataLimiteInscricao"
                    style="width: 100%; padding: 16px; border: 1px solid rgba(0,0,0,0.38); border-radius: 4px; font-size: 16px; font-family: Roboto, sans-serif; transition: border-color 0.2s;"
                    onfocus="this.style.borderColor='#1976D2'; this.style.borderWidth='2px'; this.style.padding='15px'"
                    onblur="this.style.borderColor='rgba(0,0,0,0.38)'; this.style.borderWidth='1px'; this.style.padding='16px'"
                  >
                </div>
              </div>

              <!-- Coluna 2 -->
              <div>
                <!-- Abrevia√ß√£o -->
                <div style="margin-bottom: 24px;">
                  <label for="abreviacaoOlimpiada" style="display: block; margin-bottom: 8px; font-size: 14px; color: rgba(0,0,0,0.6); font-family: Roboto, sans-serif; font-weight: 500;">
                    Abrevia√ß√£o *
                  </label>
                  <input 
                    type="text" 
                    id="abreviacaoOlimpiada" 
                    required 
                    maxlength="20"
                    style="width: 100%; padding: 16px; border: 1px solid rgba(0,0,0,0.38); border-radius: 4px; font-size: 16px; font-family: Roboto, sans-serif; transition: border-color 0.2s;"
                    onfocus="this.style.borderColor='#1976D2'; this.style.borderWidth='2px'; this.style.padding='15px'"
                    onblur="this.style.borderColor='rgba(0,0,0,0.38)'; this.style.borderWidth='1px'; this.style.padding='16px'"
                  >
                </div>

                <!-- Tipo de Custo -->
                <div style="margin-bottom: 24px;">
                  <label for="tipoCusto" style="display: block; margin-bottom: 8px; font-size: 14px; color: rgba(0,0,0,0.6); font-family: Roboto, sans-serif; font-weight: 500;">
                    Tipo de Custo
                  </label>
                  <select 
                    id="tipoCusto"
                    style="width: 100%; padding: 16px; border: 1px solid rgba(0,0,0,0.38); border-radius: 4px; font-size: 16px; font-family: Roboto, sans-serif; transition: border-color 0.2s; background: white;"
                    onfocus="this.style.borderColor='#1976D2'; this.style.borderWidth='2px'; this.style.padding='15px'"
                    onblur="this.style.borderColor='rgba(0,0,0,0.38)'; this.style.borderWidth='1px'; this.style.padding='16px'"
                  >
                    <option value="">Selecione</option>
                  </select>
                </div>

                <!-- Valor do Custo -->
                <div style="margin-bottom: 24px;">
                  <label for="valorCusto" style="display: block; margin-bottom: 8px; font-size: 14px; color: rgba(0,0,0,0.6); font-family: Roboto, sans-serif; font-weight: 500;">
                    Valor do Custo (R$)
                  </label>
                  <input 
                    type="number" 
                    id="valorCusto" 
                    step="0.01" 
                    min="0"
                    style="width: 100%; padding: 16px; border: 1px solid rgba(0,0,0,0.38); border-radius: 4px; font-size: 16px; font-family: Roboto, sans-serif; transition: border-color 0.2s;"
                    onfocus="this.style.borderColor='#1976D2'; this.style.borderWidth='2px'; this.style.padding='15px'"
                    onblur="this.style.borderColor='rgba(0,0,0,0.38)'; this.style.borderWidth='1px'; this.style.padding='16px'"
                  >
                </div>

                <!-- Tipo de Corre√ß√£o -->
                <div style="margin-bottom: 24px;">
                  <label for="tipoCorrecao" style="display: block; margin-bottom: 8px; font-size: 14px; color: rgba(0,0,0,0.6); font-family: Roboto, sans-serif; font-weight: 500;">
                    Tipo de Corre√ß√£o
                  </label>
                  <select 
                    id="tipoCorrecao"
                    style="width: 100%; padding: 16px; border: 1px solid rgba(0,0,0,0.38); border-radius: 4px; font-size: 16px; font-family: Roboto, sans-serif; transition: border-color 0.2s; background: white;"
                    onfocus="this.style.borderColor='#1976D2'; this.style.borderWidth='2px'; this.style.padding='15px'"
                    onblur="this.style.borderColor='rgba(0,0,0,0.38)'; this.style.borderWidth='1px'; this.style.padding='16px'"
                  >
                    <option value="">Carregando...</option>
                  </select>
                </div>

                <!-- Data de Aplica√ß√£o -->
                <div style="margin-bottom: 24px;">
                  <label for="dataAplicacao" style="display: block; margin-bottom: 8px; font-size: 14px; color: rgba(0,0,0,0.6); font-family: Roboto, sans-serif; font-weight: 500;">
                    Data de Aplica√ß√£o
                  </label>
                  <input 
                    type="date" 
                    id="dataAplicacao"
                    style="width: 100%; padding: 16px; border: 1px solid rgba(0,0,0,0.38); border-radius: 4px; font-size: 16px; font-family: Roboto, sans-serif; transition: border-color 0.2s;"
                    onfocus="this.style.borderColor='#1976D2'; this.style.borderWidth='2px'; this.style.padding='15px'"
                    onblur="this.style.borderColor='rgba(0,0,0,0.38)'; this.style.borderWidth='1px'; this.style.padding='16px'"
                  >
                </div>
              </div>
            </div>

            <!-- Observa√ß√µes (full width) -->
            <div style="margin-bottom: 32px;">
              <label for="observacoes" style="display: block; margin-bottom: 8px; font-size: 14px; color: rgba(0,0,0,0.6); font-family: Roboto, sans-serif; font-weight: 500;">
                Observa√ß√µes
              </label>
              <textarea 
                id="observacoes" 
                rows="4"
                maxlength="500"
                style="width: 100%; padding: 16px; border: 1px solid rgba(0,0,0,0.38); border-radius: 4px; font-size: 16px; font-family: Roboto, sans-serif; transition: border-color 0.2s; resize: vertical;"
                onfocus="this.style.borderColor='#1976D2'; this.style.borderWidth='2px'; this.style.padding='15px'"
                onblur="this.style.borderColor='rgba(0,0,0,0.38)'; this.style.borderWidth='1px'; this.style.padding='16px'"
              ></textarea>
            </div>

            <!-- Action Buttons -->
            <div style="display: flex; gap: 12px; padding-top: 24px; border-top: 1px solid rgba(0,0,0,0.12);">
              <button 
                type="button" 
                class="mdc-button mdc-button--outlined" 
                onclick="window.location.href='olimpiadas.html'"
                style="padding: 10px 24px; border: 1px solid rgba(0,0,0,0.38); border-radius: 4px; background: transparent; color: #1976D2; font-family: Roboto, sans-serif; font-weight: 500; text-transform: uppercase; cursor: pointer; font-size: 14px; transition: all 0.2s;"
                onmouseover="this.style.backgroundColor='rgba(25, 118, 210, 0.04)'"
                onmouseout="this.style.backgroundColor='transparent'"
              >
                <span class="material-icons" style="font-size: 18px; vertical-align: middle; margin-right: 8px;">arrow_back</span>
                Cancelar
              </button>
              <button 
                type="submit" 
                class="mdc-button mdc-button--raised" 
                style="padding: 10px 32px; border: none; border-radius: 4px; background: #1976D2; color: white; font-family: Roboto, sans-serif; font-weight: 500; text-transform: uppercase; cursor: pointer; font-size: 14px; box-shadow: 0 3px 1px -2px rgba(0,0,0,.2), 0 2px 2px 0 rgba(0,0,0,.14), 0 1px 5px 0 rgba(0,0,0,.12); transition: all 0.2s;"
                onmouseover="this.style.backgroundColor='#1565C0'; this.style.boxShadow='0 5px 5px -3px rgba(0,0,0,.2), 0 8px 10px 1px rgba(0,0,0,.14), 0 3px 14px 2px rgba(0,0,0,.12)'"
                onmouseout="this.style.backgroundColor='#1976D2'; this.style.boxShadow='0 3px 1px -2px rgba(0,0,0,.2), 0 2px 2px 0 rgba(0,0,0,.14), 0 1px 5px 0 rgba(0,0,0,.12)'"
              >
                <span class="material-icons" style="font-size: 18px; vertical-align: middle; margin-right: 8px;">save</span>
                Salvar
              </button>
            </div>
          </form>
        </div>
      </div>
  </main>
  </div>

  <!-- Material Design JS -->
  <script src="https://unpkg.com/material-components-web@latest/dist/material-components-web.min.js"></script>
  
  <script src="../js/app.js"></script>
  <script>
    // Verificar autentica√ß√£o
    checkAuth();
    const user = getUser();
    if (user) {
      document.getElementById('userName').textContent = user.nome || user.email;
      
      // Mostrar se√ß√£o de administra√ß√£o apenas para administradores
      const adminSection = document.getElementById('adminSection');
      if (adminSection && user.nivel_acesso === 1) {
        adminSection.style.display = 'block';
      }
    }

    // Carregar anos letivos ativos
    async function carregarAnosLetivos() {
      try {
        const response = await fetchAuth('/anos-letivos');
        console.log('Resposta anos letivos:', response);
        
        const anosLetivos = response.data || [];
        console.log('Anos letivos recebidos:', anosLetivos);
        
        // Filtrar apenas anos ativos
        const anosAtivos = anosLetivos.filter(ano => ano.status === 'ativo');
        console.log('Anos ativos filtrados:', anosAtivos);
        
        const select = document.getElementById('ano');
        select.innerHTML = '<option value="">Selecione</option>';
        
        anosAtivos.forEach(ano => {
          const option = document.createElement('option');
          option.value = ano.anoLetivo;
          option.textContent = ano.anoLetivo;
          select.appendChild(option);
        });
      } catch (error) {
        console.error('Erro ao carregar anos letivos:', error);
        const select = document.getElementById('ano');
        select.innerHTML = '<option value="">Erro ao carregar</option>';
      }
    }

    // Carregar locais de aplica√ß√£o ativos
    async function carregarLocaisAplicacao() {
      try {
        const response = await fetchAuth('/locais-aplicacao?status=ativo');
        const locais = response.data || [];
        
        const select = document.getElementById('localAplicacao');
        select.innerHTML = '<option value="">Selecione</option>';
        
        locais.forEach(local => {
          const option = document.createElement('option');
          option.value = local.idLocalAplicacao;
          option.textContent = local.nomeLocal;
          select.appendChild(option);
        });
      } catch (error) {
        console.error('Erro ao carregar locais de aplica√ß√£o:', error);
        const select = document.getElementById('localAplicacao');
        select.innerHTML = '<option value="">Erro ao carregar</option>';
      }
    }

    // Carregar tipos de pagamento ativos
    async function carregarTiposPagamento() {
      try {
        const response = await fetchAuth('/tipos-pagamento?status=ativo');
        const tipos = response.data || [];
        
        const select = document.getElementById('tipoCusto');
        select.innerHTML = '<option value="">Selecione</option>';
        
        tipos.forEach(tipo => {
          const option = document.createElement('option');
          option.value = tipo.idTipoPagamento;
          option.textContent = tipo.descricao;
          select.appendChild(option);
        });
      } catch (error) {
        console.error('Erro ao carregar tipos de pagamento:', error);
        const select = document.getElementById('tipoCusto');
        select.innerHTML = '<option value="">Erro ao carregar</option>';
      }
    }

    // Carregar tipos de corre√ß√£o
    async function carregarTiposCorrecao() {
      try {
        const response = await fetchAuth('/tipos-correcao?ativo=S');
        const tiposCorrecao = response.data || [];
        
        const select = document.getElementById('tipoCorrecao');
        select.innerHTML = '<option value="">Selecione</option>';
        
        tiposCorrecao.forEach(tipo => {
          const option = document.createElement('option');
          option.value = tipo.idTipoCorrecao || tipo.id;
          option.textContent = tipo.descricao;
          select.appendChild(option);
        });
      } catch (error) {
        console.error('Erro ao carregar tipos de corre√ß√£o:', error);
        const select = document.getElementById('tipoCorrecao');
        select.innerHTML = '<option value="">Erro ao carregar</option>';
      }
    }

    // Carregar anos letivos, locais de aplica√ß√£o, tipos de pagamento e tipos de corre√ß√£o ao iniciar
    carregarAnosLetivos();
    carregarLocaisAplicacao();
    carregarTiposPagamento();
    carregarTiposCorrecao();

    // Verificar se est√° editando
    const urlParams = new URLSearchParams(window.location.search);
    const idOlimpiada = urlParams.get('id');

    if (idOlimpiada) {
      // Modo edi√ß√£o
      document.getElementById('pageTitle').textContent = 'Editar Olimp√≠ada';
      document.getElementById('breadcrumbTitle').textContent = 'Editar Olimp√≠ada';
      document.getElementById('formTitle').textContent = 'Editar Dados da Olimp√≠ada';
      carregarOlimpiada(idOlimpiada);
    }

    // Carregar dados da olimp√≠ada para edi√ß√£o
    async function carregarOlimpiada(id) {
      try {
        const response = await fetchAuth(`/olimpiadas/${id}`);
        const olimpiada = response.olimpiada;
        
        document.getElementById('idOlimpiada').value = olimpiada.idOlimpiada;
        document.getElementById('nomeOlimpiada').value = olimpiada.nomeOlimpiada;
        document.getElementById('abreviacaoOlimpiada').value = olimpiada.abreviacaoOlimpiada;
        document.getElementById('ano').value = olimpiada.ano;
        document.getElementById('localAplicacao').value = olimpiada.idLocalAplicacao || '';
        document.getElementById('tipoCusto').value = olimpiada.idTipoPagamento || '';
        document.getElementById('valorCusto').value = olimpiada.valorCusto || '';
        document.getElementById('tipoCorrecao').value = olimpiada.idTipoCorrecao || '';
        document.getElementById('dataLimiteInscricao').value = olimpiada.dataLimiteInscricao ? olimpiada.dataLimiteInscricao.split('T')[0] : '';
        document.getElementById('dataAplicacao').value = olimpiada.dataAplicacao ? olimpiada.dataAplicacao.split('T')[0] : '';
        document.getElementById('observacoes').value = olimpiada.observacoes || '';
      } catch (error) {
        showNotification('Erro ao carregar olimp√≠ada: ' + error.message, 'error');
        setTimeout(() => window.location.href = 'olimpiadas.html', 2000);
      }
    }

    // Salvar olimp√≠ada (criar ou atualizar)
    async function salvarOlimpiada(event) {
      event.preventDefault();
      
      const currentUser = getUser();
      console.log('currentUser:', currentUser);
      
      if (!currentUser || !currentUser.id) {
        console.error('Usu√°rio n√£o encontrado ou sem id');
        showNotification('Usu√°rio n√£o autenticado', 'error');
        return;
      }
      
      const idOlimpiada = document.getElementById('idOlimpiada').value;
      const dados = {
        nomeOlimpiada: document.getElementById('nomeOlimpiada').value.trim(),
        abreviacaoOlimpiada: document.getElementById('abreviacaoOlimpiada').value.trim(),
        ano: parseInt(document.getElementById('ano').value),
        idUsuarioResponsavel: currentUser.id,
        idLocalAplicacao: document.getElementById('localAplicacao').value ? parseInt(document.getElementById('localAplicacao').value) : null,
        idTipoPagamento: document.getElementById('tipoCusto').value ? parseInt(document.getElementById('tipoCusto').value) : null,
        valorCusto: parseFloat(document.getElementById('valorCusto').value) || null,
        idTipoCorrecao: document.getElementById('tipoCorrecao').value ? parseInt(document.getElementById('tipoCorrecao').value) : null,
        dataLimiteInscricao: document.getElementById('dataLimiteInscricao').value || null,
        dataAplicacao: document.getElementById('dataAplicacao').value || null,
        observacoes: document.getElementById('observacoes').value.trim() || null
      };

      console.log('Dados a serem enviados:', dados);

      try {
        if (idOlimpiada) {
          // Atualizar
          const response = await fetchAuth(`/olimpiadas/${idOlimpiada}`, {
            method: 'PUT',
            headers: { 'Content-Type': 'application/json' },
            body: JSON.stringify(dados)
          });
          console.log('Resposta PUT:', response);
          showNotification('Olimp√≠ada atualizada com sucesso!', 'success');
        } else {
          // Criar
          const response = await fetchAuth(`/olimpiadas`, {
            method: 'POST',
            headers: { 'Content-Type': 'application/json' },
            body: JSON.stringify(dados)
          });
          console.log('Resposta POST:', response);
          showNotification('Olimp√≠ada criada com sucesso!', 'success');
        }
        
        setTimeout(() => window.location.href = 'olimpiadas.html', 1500);
      } catch (error) {
        console.error('Erro completo:', error);
        showNotification('Erro ao salvar olimp√≠ada: ' + error.message, 'error');
      }
    }
  </script>
  </div>
</body>
</html>
